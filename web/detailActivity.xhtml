<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f = "http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <style>html,body,h1,h2,h3,h4,h5 {font-family: "Raleway", sans-serif}</style>

    
    <h:head class="w3-container" >
        <title>Activities management</title>
    </h:head>

    <h:body style="background-image:url(images/back.png); background-size:cover; background-repeat: no-repeat" >   

        <ui:include src="/menu.xhtml"/>
        <br/>



        <h1 style="margin-top: 10px">Activities management :</h1>

        <!-- detail des activites -->
     
        <!--<h:form>              
            <p:dataTable value="#{detailActivityBean.listDataActivities}" var="c"  style = "text-align:center" paginator="true" rows="10">
                <f:facet name="header">
                    Car List
                </f:facet>
                <p:column  headerText="speed">
                    <h:outputText value="#{c.speed}" />
                </p:column>
                <p:column headerText="hrm">
                    <h:outputText value="#{c.hrm}" />
                </p:column>
               
              
            </p:dataTable>
                
        </h:form>     -->   
          

        <h:form id="Power">
            <p:poll interval="1" update="Power" />
            <p:chart type="line" model="#{detailActivityBean.lineModel}" style="background-color: blanchedalmond; width: 100%;height:500px"/>
        </h:form>

        <br></br>
        <br></br>
        <br></br>

        <h:form id="Cadence">
            <p:poll interval="1" update="Cadence" />
            <p:chart type="line" model="#{detailActivityBean.lineModelCad}" style="background-color: blanchedalmond; width: 100%;height:500px"/>
        </h:form>
        
         <br></br>
        <br></br>
        <br></br>
        
        <h:form id="HRM">
            <p:poll interval="1" update="HRM" />
            <p:chart type="line" model="#{detailActivityBean.lineModelHrm}" style="background-color: blanchedalmond; width: 100%;height:500px"/>
        </h:form>
        
         <br></br>
        <br></br>
        <br></br>
        
        

        
        <!-- carte openstreetMap-->
        <meta charset="utf-8"></meta>
        <!-- Nous chargeons les fichiers CDN de Leaflet. Le CSS AVANT le JS -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
            crossorigin="" />
        <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
            crossorigin=""></script>
		<script type="text/javascript">
			// latitude et la longitude de lons
			var lat = 46.6667;
			var lon = 5.55;
			var macarte = null;
			// Fonction d'initialisation de la carte
			function initMap() {
				// Créer l'objet "macarte" et l'insèrer dans l'élément HTML qui a l'ID "map"
                macarte = L.map('map').setView([lat, lon], 11);
                // Leaflet ne récupère pas les cartes (tiles) sur un serveur par défaut. Nous devons lui préciser où nous souhaitons les récupérer. Ici, openstreetmap.fr
                L.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {
                    // Il est toujours bien de laisser le lien vers la source des données
                    attribution: 'données © <a href="//osm.org/copyright">OpenStreetMap</a>/ODbL - rendu <a href="//openstreetmap.fr">OSM France</a>',
                    minZoom: 1,
                    maxZoom: 20
                }).addTo(macarte);
                var marker = L.marker([lat, lon]).addTo(macarte)
                marker.bindPopup('Une jolie popup<br></br> Facilement personnalisable');
        
                var polygon = L.polygon([
                    [46.6667, 5.5833],
                    [46.6833, 5.6667],
                    [46.65, 5.7667]
                    ]).addTo(macarte);
                    polygon.bindPopup("Course entre Perrigny, Doucier et Crançot");
            }
			window.onload = function(){
				// Fonction d'initialisation qui s'exécute lorsque le DOM est chargé
				initMap(); 
			};
		</script>
		<style type="text/css">
			#map{ /* la carte DOIT avoir une hauteur sinon elle n'apparaît pas */
				height:400px;
			}
		</style>
		<title>Carte</title>
	<body>
		<div id="map">
			<!-- Ici s'affichera la carte -->
		</div>
        </body>
                
                
           
                
    </h:body>
</html>

